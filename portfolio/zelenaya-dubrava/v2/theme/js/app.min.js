const getParentByNode=(e,t)=>{if(e&&e.nodeName!==t)for(;e&&e.nodeName!==t;)e=e.parentNode;return"#document"===e?.nodeName?null:e};window.onload=()=>{const e=new ScrollMagic.Controller,t=document.querySelector("[data-header]");let a=window.pageYOffset;const i=e=>{const i=window.pageYOffset;t.classList[i>5?"add":"remove"]("bg"),e&&t.classList[i<a||i<=10?"remove":"add"]("hidden"),a=i};i(!1),window.addEventListener("scroll",(()=>i(!0)));const n=Array.from(document.querySelectorAll("[data-swiper]"));let s,o,r;window.swipers={};for(let e in n){switch(n[e].getAttribute("data-swiper")){case"main":window.swipers.main=new Swiper(n[e],{effect:"fade",loop:!0,allowTouchMove:!1,on:{init:e=>{Array.from(e.el.querySelectorAll("[data-video-btn]")).map((t=>t.addEventListener("click",(({target:t})=>{(t=getParentByNode(t,"BUTTON")).classList.toggle("active"),t.classList.contains("active")?(e.el.classList.toggle("active"),e.el.classList.add("animate1"),setTimeout((()=>e.el.classList.add("animate2")),150)):(e.el.classList.remove("animate2"),setTimeout((()=>{e.el.classList.remove("animate1"),setTimeout((()=>e.el.classList.toggle("active")),150)}),150)),setTimeout((()=>e.el.nextElementSibling.classList.toggle("opacity")),150),document.body.classList.toggle("overflow")}))))}}});break;case"main_thumb":new Swiper(n[e],{loop:!0,allowTouchMove:!1,autoHeight:!0,navigation:{nextEl:".main_thumb_next",prevEl:".main_thumb_prev"},on:{slideChange:e=>window.swipers.main.slideTo(e.realIndex)}});break;case"main_side":swiper=new Swiper(n[e],{loop:!0,allowTouchMove:!1,autoplay:!0});break;case"card1":s=n[e].querySelector(".navs"),o=s.querySelector(".card1_prev"),r=s.querySelector(".card1_next"),swiper=new Swiper(n[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:r,prevEl:o}});break;case"news":s=n[e].querySelector(".navs"),o=s.querySelector(".news_prev"),r=s.querySelector(".news_next"),swiper=new Swiper(n[e],{slidesPerView:2,spaceBetween:16,navigation:{nextEl:r,prevEl:o}});break;case"quiz":const t=n[e].querySelector("[data-quiz-steps]"),a=e=>{t&&(t.innerHTML=`Шаг ${e.realIndex+1}<span>из ${e.slides.length}</span>`),e.el.classList[e.realIndex+1===e.slides.length?"add":"remove"]("hidden")};swiper=new Swiper(n[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,navigation:{nextEl:".quiz_next",prevEl:".quiz_prev"},on:{init:e=>a(e),slideChange:e=>a(e)}});break;case"history":swiper=new Swiper(n[e],{slidesPerView:4,spaceBetween:16});const i=Array.from(n[e].querySelectorAll("[data-history-step]"));for(let e in i)i[e].addEventListener("click",(({target:e})=>{if(!e.classList.contains("active")){const t=i.find((e=>e.classList.contains("active")));t&&t.classList.remove("active"),e.classList.add("active");const a=e.getAttribute("data-history-step"),n=swiper.slides.findIndex((e=>e.getAttribute("data-history-target")==a));swiper.slideTo(n)}}));break;case"values":swiper=new Swiper(n[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:".values_next",prevEl:".values_prev"}})}}const l=document.querySelector("[data-animation-flask]");l&&(new ScrollMagic.Scene({triggerElement:l,duration:600}).setTween(l,{rotate:0}).addTo(e),new ScrollMagic.Scene({triggerElement:l,duration:550}).setTween("[data-animation-flask-fill]",{rotate:0,height:"90%"}).addTo(e));const c=document.querySelector("[data-animation-bottle]");c&&new ScrollMagic.Scene({triggerElement:c,duration:c.clientHeight}).setTween(c,{rotate:0}).addTo(e);const d=document.querySelector("[data-animation-big-logo]"),w=document.querySelector("[data-animation-big-logo-triger]");d&&new ScrollMagic.Scene({triggerElement:w,duration:w.clientHeight,offset:-1.5*w.clientHeight}).setTween(d,{bottom:-1*w.clientHeight,opacity:0}).addTo(e);const g=document.querySelector("[data-animation-small-logo]");g&&new ScrollMagic.Scene({triggerElement:g,duration:g.clientHeight}).setTween(g,{bottom:-278}).addTo(e);const m=window.innerWidth<600?60:120;AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:m,delay:0,duration:800,easing:"ease",once:!0,mirror:!1,anchorPlacement:"top-bottom"}),document.addEventListener("aos:in",(({detail:e})=>{const t=parseInt(e.getAttribute("data-count"));if(t){const a=getParentByNode(e,"LI");a.style.width=`${a.offsetWidth}px`,a.style.height=`${a.offsetHeight}px`;let i=parseInt(e.getAttribute("data-step"));i=i||1;let n=0,s=setInterval((()=>{n+=i,e.innerHTML=n,n>=t&&(e.innerHTML=t,a.removeAttribute("style"),clearInterval(s))}),e.getAttribute("data-speed"))}}))};